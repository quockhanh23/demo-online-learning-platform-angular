<app-header></app-header>
<app-title message="Danh sách khóa học"></app-title>
<div class="container" style="background-color: #e2eaef">
  <div class="row" style="background-color: #e2eaef; border-radius: 5px">
    <div class="col-4">
      <div style="margin-top: 15px">
        <h2>Học trực tuyến</h2>
      </div>
    </div>
    <div class="col-3"></div>
    <div class="col-5" style="margin-top: 20px;">
      <form>
        <div class="row">
          <div class="col-1">
            <span matTooltip="Thêm mới khóa học" *ngIf="role == 'TEACHER' || role == 'ADMIN'"
                  [routerLink]="['/createCourse']"
                  style="font-size: 40px; color: #327eab"
                  class="material-icons cursorTag">add_circle</span>
          </div>
          <div class="col-9">
            <input id="search" style="width: 100%; margin-left: 10px" class="form-control mr-sm-2" type="search"
                   placeholder="Tìm kiếm theo tên khóa học"
                   aria-label="Search">
          </div>
          <div class="col-2">
            <button (click)="getAllCourse(0, 8)" class="btn btn-info" type="submit" style="height: 40px">
              <span class="material-icons">search</span></button>
          </div>
        </div>
      </form>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-4" style="margin-top: 10px">
      <div *ngFor="let c of pageCourse?.content; let i = index">
        <div style="margin-bottom: 5px; margin-left: 10px;">
          <div class="row">
            <div class="col-12" style="border-radius: 5px; border: #554c86 1px solid; background-color: white">
              <div class="row" style="margin-top: 10px">
                <div class="col-9" align="left">
                  <h3>{{c?.courseName}}</h3>
                  <p>{{c?.courseDescription}}</p>
                </div>
                <div class="col-3" align="right">
                  <img style="border-radius: 50%; width: 50px; height: 50px"
                       src="../../../assets/image/Harvard-logo.png">
                </div>
              </div>
              <div class="row">
                <div class="col-5">
                  <button style="margin-top: 20px; margin-bottom: 5px; margin-left: 10px" class="btn btn-info"
                          (click)="getDetailCourse(c?.id); scrollToTop();">Xem
                  </button>
                </div>
                <div class="col-1" style="margin-top: 25px">
                  <span>{{c?.rate}}</span>
                </div>
                <div class="col-6" style="margin-top: 25px">
                  <div class="rating" style="pointer-events: none;">
                    <input type="radio" [name]="'rating-' + i" value="5" [id]="'5-' + i"
                           [checked]="(c?.rate ?? 0) >= 5">
                    <label [for]="'5-' + i">☆</label>

                    <input type="radio" [name]="'rating-' + i" value="4" [id]="'4-' + i"
                           [checked]="(c?.rate ?? 0) >= 4 && (c?.rate ?? 0) < 5">
                    <label [for]="'4-' + i">☆</label>

                    <input type="radio" [name]="'rating-' + i" value="3" [id]="'3-' + i"
                           [checked]="(c?.rate ?? 0) >= 3 && (c?.rate ?? 0) < 4">
                    <label [for]="'3-' + i">☆</label>

                    <input type="radio" [name]="'rating-' + i" value="2" [id]="'2-' + i"
                           [checked]="(c?.rate ?? 0) >= 2 && (c?.rate ?? 0) < 3">
                    <label [for]="'2-' + i">☆</label>

                    <input type="radio" [name]="'rating-' + i" value="1" [id]="'1-' + i"
                           [checked]="(c?.rate ?? 0) >= 1 && (c?.rate ?? 0) < 2">
                    <label [for]="'1-' + i">☆</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-8" *ngIf="course != null" style="margin-top: 10px">
      <div class="row" style="margin-bottom: 50px;">
        <div class="col-7">
          <div class="row">
            <div class="col-2">
              <div class="status-button" style="margin-bottom: 15px" *ngIf="course?.status == 'ACTIVE'">
                <span style="color: green" class="material-icons">check_circle</span>
              </div>
              <div class="status-button" style="margin-bottom: 15px" *ngIf="course?.status == 'INACTIVE'">
                <span style="color: #327eab" class="material-icons">info_outline</span>
              </div>
            </div>
            <div class="col-10">
              <h2 style="margin-top: 5px">{{course?.courseName}}
                <sub><span *ngIf="completeCourse != null && completeCourse?.status == 'STUDYING'"
                           matTooltip="Đang học..."
                           class="material-icons hoverYellowColor hourglass-flip cursorTag">hourglass_top</span></sub>
              </h2>
            </div>
          </div>
          <div style="margin-top: 5px; margin-left: 5px">
            <p>{{course?.courseDescription}}</p>
            <p>{{course?.startDate | date: 'dd/MM/yyyy'}}</p>
            <p>{{course?.endDate | date: 'dd/MM/yyyy'}}</p>
            <p>Tổng số bài học trong khóa: <b>{{sizeLessons}}</b></p>
          </div>
          <button style="margin-top: 20px" class="btn btn-info" [routerLink]="['/detailCourse', course?.id]">
            Xem chi tiết
          </button>
        </div>
        <div class="col-5">
          <img style="width: 100%; border-radius: 5px" src="{{course?.logo}}">
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-12">
          <section class="pt-5 pb-5">
            <div class="container">
              <div class="row">
                <div class="col-6">
                  <h3 class="mb-3">Các bài học trong khóa</h3>
                </div>
                <div class="col-6 text-right">
                  <a matTooltip="Sang trái" class="mb-3 mr-1" href="#carouselExampleIndicators2" role="button"
                     data-slide="prev">
                    <span class="material-icons">arrow_back_ios</span>
                  </a>
                  <a matTooltip="Sang phải" class="mb-3" href="#carouselExampleIndicators2" role="button"
                     data-slide="next">
                    <span class="material-icons">arrow_forward_ios</span>
                  </a>
                </div>
                <div class="col-12">
                  <div id="carouselExampleIndicators2" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <div class="row">
                          <div class="col-md-4 mb-3" *ngFor="let item of first3Item">
                            <div class="card">
                              <span *ngIf="course?.status == 'ACTIVE'"
                                    style="color: green; margin-left: 5px; margin-top: 5px"
                                    class="material-icons">check_circle</span>
                              <span *ngIf="course?.status == 'INACTIVE'"
                                    style="color: #327eab;  margin-left: 5px; margin-top: 5px"
                                    class="material-icons">info_outline</span>
                              <img class="img-fluid" style="width: 100%; height: 150px"
                                   alt="100%x280" src="{{item?.image}}">
                              <div class="card-body">
                                <h4 class="card-title">
                                  {{item?.lessonNumber}}</h4>
                                <p class="card-text">{{item?.lessonName}}</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item" *ngFor="let group of chunks">
                        <div class="row">
                          <div class="col-md-4 mb-3" *ngFor="let item of group">
                            <div class="card">
                              <span *ngIf="course?.status == 'ACTIVE'"
                                    style="color: green; margin-left: 5px; margin-top: 5px"
                                    class="material-icons">check_circle</span>
                              <span *ngIf="course?.status == 'INACTIVE'"
                                    style="color: #327eab;  margin-left: 5px; margin-top: 5px"
                                    class="material-icons">info_outline</span>
                              <img class="img-fluid" style="width: 100%; height: 150px"
                                   alt="100%x280" src="{{item?.image}}">
                              <div class="card-body">
                                <h4 class="card-title">
                                  {{item?.lessonNumber}}</h4>
                                <p class="card-text">{{item?.lessonName}}</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
      <img style="width: 100%; margin-top: 20px; border-radius: 5px" src="../../../assets/image/e-learning.jpg">
    </div>
    <div class="col-8" *ngIf="course == null">
      <img style="width: 100%; margin-top: 10px; border-radius: 5px" src="../../../assets/image/e-learning.jpg">
      <img style="width: 100%; margin-top: 50px; border-radius: 5px" src="../../../assets/image/e-learning2.jpg">
    </div>
  </div>

  <div class="row" style="margin-top: 20px">
    <div class="col-3" align="left">
      <p style="margin-top: 5px; font-size: 17px">Trang: {{currentPageAddOne}}/{{pageCourse?.content?.length}} | Tổng
        số: {{pageCourse?.page?.totalElements}}</p>
    </div>
    <div class="col-1" align="left">
      <div>
        <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
          <div class="btn-group mr-2" role="group" aria-label="Second group">
            <button matTooltip="Trang trước" type="button" class="btn btn-link" (click)="previousPage()">
              <span style="font-size: 15px"
                    class="material-icons hoverYellowColor cursorTag">arrow_back_ios</span>
            </button>
            <button matTooltip="Trang tiếp theo" type="button" class="btn btn-link" (click)="nextPage()">
            <span style="font-size: 15px"
                  class="material-icons hoverYellowColor cursorTag">arrow_forward_ios</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="col-4"></div>
    <div class="col-4"></div>
  </div>
  <hr>
  <div class="row">
    <h2 style="text-align: center; width: 100%;">Giảng viên nổi bật</h2>
    <div class="card-container">
      <div *ngFor="let user of userDTOs">
        <div class="card" style="width: 18rem;">
          <img *ngIf="user?.avatar != null && user?.avatar != ''" class="card-img-top" src="{{user?.avatar}}"
               alt="Card image cap">
          <img *ngIf="user?.avatar == null || user?.avatar == ''" class="card-img-top"
               src="../../../assets/image/avatar-default.jpg"
               alt="Card image cap">
          <div class="card-body">
            <h3 class="card-title">{{user?.fullName}}
              <span class="status-dot" [ngClass]="user?.online ? 'online' : 'offline'"></span>
            </h3>
            <p class="card-text">
              {{user?.education}}
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
