<app-header></app-header>
<app-title message="Làm bài tập"></app-title>
<div class="container" style="background-color: whitesmoke">
     <span [routerLink]="['/detailLesson', idLesson]" style="font-size: 35px; cursor: pointer;"
           matTooltip="Quay lại" class="material-icons hoverYellowColor">arrow_back</span>
  <hr style="margin-top: 0px">
  <div class="row">
    <div class="col-6">
      <h2>{{topicTestDTO?.testName}}</h2>
    </div>
    <div class="col-6" align="right">
      <span style="font-size: 20px">Thời gian làm bài: </span>
      <span style="font-size: 20px; color: green">{{display}}</span>
    </div>
  </div>
  <hr style="margin-top: 0px">
  <div class="row" *ngIf="message != null">
    <div class="alert alert-danger" role="alert">
      {{message}}
    </div>
  </div>
  <div class="row" *ngIf="message != null">
    <div style="height: 500px"></div>
  </div>
  <div class="row" *ngIf="message == null">
    <div class="col-12">
      <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-12">
            <h2>* Phần trắc nghiệm</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-1"></div>
          <div class="col-11">
            <div formArrayName="items">
              <div *ngFor="let item of items.controls; let i = index" [formGroupName]="i">
                <div style="font-size: 18px; margin-bottom: 5px">
                  <h3 style="margin-top: 15px">
                    <strong><span>{{ item.get('questionNumber')?.value }}</span><span>. </span>
                      <span>{{ item.get('content')?.value }}</span></strong></h3>
                </div>
                <div class="row" style="margin-bottom: 5px">
                  <div class="col-3">
                    <span><b>A: </b> <sub><input id="answer1" type="radio" value="{{ item.get('answer1')?.value }}"
                                                 formControlName="answer"></sub></span>
                    <span>&nbsp;{{ item.get('answer1')?.value }}</span>
                  </div>
                  <div class="col-3">
                    <span><b>B: </b> <sub><input id="answer2" type="radio" value="{{ item.get('answer2')?.value }}"
                                                 formControlName="answer"></sub></span>
                    <span>&nbsp;{{ item.get('answer2')?.value }}</span>
                  </div>
                  <div class="col-3">
                    <span><b>C: </b> <sub><input id="answer3" type="radio" value="{{ item.get('answer3')?.value }}"
                                                 formControlName="answer"></sub></span>
                    <span>&nbsp;{{ item.get('answer3')?.value }}</span>
                  </div>
                  <div class="col-3">
                    <span><b>D: </b> <sub><input id="answer4" type="radio" value="{{ item.get('answer4')?.value }}"
                                                 formControlName="answer"></sub></span>
                    <span>&nbsp;{{ item.get('answer4')?.value }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <h2>* Phần tự luận</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-1"></div>
          <div class="col-11">
            <div formArrayName="essayQuestions">
              <div *ngFor="let item of essayQuestions.controls; let i = index" [formGroupName]="i">
                <div style="font-size: 18px; margin-bottom: 5px">
                  <b>{{ item.get('questionNumber')?.value }}</b><span>. </span>
                  <b>{{ item.get('content')?.value }}</b>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" style="margin-bottom: 5px">
          <div class="col-1"></div>
          <div class="col-11">
            <textarea style="width: 100%; height: 100px; margin-top: 10px" formControlName="answerEssay"
                      placeholder="Viết câu trả lời ở đây"></textarea>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <button style="margin-bottom: 10px" class="btn btn-primary" (click)="changeToDetailLessonPage()"
                    type="submit">
              Nộp bài
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

